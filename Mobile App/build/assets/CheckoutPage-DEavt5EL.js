import{r as u,j as e,B as n,A as w,e as p,S as F,w as S,t as C}from"./index-Bqz_yRq7.js";import{H as k,N as D}from"./index-J6jMrZ_n.js";import{W as U}from"./wallet-CGREQBBe.js";import{X as P}from"./x-Czzre-n4.js";import{m as N}from"./proxy-BKIinVtD.js";const T=({isOpen:l,onClose:c,onConfirm:b,cartItems:i,totalBery:x,totalUSD:o,isProcessing:a})=>l?e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs(N.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-[#1a1a2e] rounded-2xl border border-slate-700/40 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700/40",children:[e.jsx("h3",{className:"text-lg text-white font-semibold",children:"Confirm Purchase"}),e.jsx(n,{variant:"ghost",size:"icon",onClick:c,className:"text-slate-400 hover:text-white hover:bg-slate-800/50 rounded-full",children:e.jsx(P,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm text-slate-300 mb-2",children:"Items:"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:i.map(t=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-slate-300",children:[t.name," ",e.jsxs("span",{className:"text-slate-500",children:["(x",t.quantity,")"]})]}),e.jsxs("span",{className:"text-white",children:["₿",(parseFloat(t.price.replace("₿","").replace("From","").trim())*t.quantity).toFixed(2)]})]},t.id))})]}),e.jsx("div",{className:"py-3 border-t border-b border-slate-700/40",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-base text-white font-semibold",children:"Total Amount"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-base text-white font-bold",children:["₿",x.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-slate-400",children:["$",o.toFixed(2)," USD"]})]})]})}),e.jsx("p",{className:"text-sm text-slate-400 mt-3 mb-5",children:"Are you sure you want to proceed with this purchase?"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(n,{variant:"outline",onClick:c,className:"flex-1 bg-transparent border-slate-600/40 text-white hover:bg-slate-800/50",children:"Cancel"}),e.jsx(n,{onClick:b,disabled:a,className:"flex-1 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 disabled:opacity-50",children:a?"Processing...":"Proceed"})]})]})]})}):null;function O({cartItems:l,totalBery:c,totalUSD:b,walletBalance:i,onBack:x,onConfirmPurchase:o}){const[a,t]=u.useState(!1),[y,d]=u.useState(!1),m=l.reduce((s,f)=>{const g=parseFloat(f.price.replace("₿","").replace("From","").trim());return s+g*f.quantity*8.9},0),j=m*.1,h=m+j+0,r=h/8.9,v=async()=>{if(d(!1),i<r){C.error("Insufficient Funds",{description:`You need ₿${r.toFixed(2)} but only have ₿${i.toFixed(2)} in your wallet.`}),t(!1);return}try{k.notification({type:D.Success})}catch{}t(!0),setTimeout(()=>{o("bery",r),t(!1)},1500)};return e.jsxs("div",{className:"h-screen overflow-y-auto bg-[#0a0a1a] pb-32",children:[e.jsxs("div",{className:"bg-[#0a0a1a] px-5 pt-14 pb-4 flex items-center justify-between",children:[e.jsx(n,{variant:"ghost",size:"icon",onClick:x,className:"text-white hover:bg-slate-800/50 rounded-full",children:e.jsx(w,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-base text-white",style:{fontFamily:"Inter, sans-serif",fontWeight:600},children:"Checkout"}),e.jsx("div",{className:"w-10"})," "]}),e.jsx("div",{className:"px-5 py-6",children:e.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs(p,{className:"p-5 bg-[#0a0a1a] border border-slate-700/40 mb-6",children:[e.jsx("h2",{className:"text-lg text-white mb-4",style:{fontFamily:"Inter, sans-serif",fontWeight:700},children:"Order Summary"}),e.jsx("div",{className:"space-y-4 mb-6",children:l.map(s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl bg-gradient-to-br from-blue-600/20 to-blue-800/20 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:s.image})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm text-white font-medium truncate",children:s.name}),e.jsx("p",{className:"text-xs text-slate-400 mb-1",children:s.category}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-slate-300",children:["Qty: ",s.quantity]}),e.jsxs("span",{className:"text-sm text-white font-medium",children:["₿",(parseFloat(s.price.replace("₿","").replace("From","").trim())*s.quantity).toFixed(2)]})]})]})]},s.id))}),e.jsxs("div",{className:"space-y-2 pt-4 border-t border-slate-700/40",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-300",children:"Subtotal"}),e.jsxs("span",{className:"text-sm text-white",children:["$",m.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-300",children:"Tax (10%)"}),e.jsxs("span",{className:"text-sm text-white",children:["$",j.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-300",children:"Shipping"}),e.jsx("span",{className:"text-sm text-green-400",children:"Free"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-slate-700/40",children:[e.jsx("span",{className:"text-base text-white font-bold",children:"Total"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-base text-white font-bold",children:["₿",r.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-slate-400",children:["$",h.toFixed(2)," USD"]})]})]})]})]}),e.jsxs(p,{className:"p-5 bg-[#0a0a1a] border border-slate-700/40 mb-6",children:[e.jsx("h2",{className:"text-lg text-white mb-4",style:{fontFamily:"Inter, sans-serif",fontWeight:700},children:"Wallet Balance"}),e.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-xl border border-slate-700/40 bg-[#0a0a1a]",children:[e.jsx(U,{className:"w-5 h-5 text-blue-400"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm text-white font-medium",children:"Bery Wallet"}),e.jsxs("p",{className:"text-xs text-slate-400",children:["₿",i.toFixed(2)," available"]})]})]})]}),e.jsx(p,{className:"p-5 bg-[#0a0a1a] border border-slate-700/40 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-blue-400"}),e.jsx("p",{className:"text-sm text-slate-300",children:"Your payment is secured with bank-level encryption"})]})}),e.jsx(n,{onClick:()=>d(!0),disabled:a,className:"w-full h-14 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 disabled:opacity-50",children:a?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Processing..."})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5"}),e.jsx("span",{children:"Confirm Purchase"})]})})]})}),e.jsx(T,{isOpen:y,onClose:()=>d(!1),onConfirm:v,cartItems:l,totalBery:r,totalUSD:h,isProcessing:a})]})}export{O as CheckoutPage};

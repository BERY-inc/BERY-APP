import{c as w,r as k,j as e,B as n,A as F,e as f,m as C,t as S}from"./index-BKXw_VyK.js";import{B as I}from"./BottomNavigation-BmO9oE0V.js";import{E}from"./EmptyState-B9PSxZ6K.js";import{M as T}from"./minus-BEFXpFcf.js";import{P as W}from"./plus-BR0EeFYZ.js";import{C as A}from"./circle-alert-Bx6qHLF_.js";import{A as B}from"./index-gDK2omaE.js";import{m as M}from"./proxy-BXaEAfrz.js";import"./index-oVrvYLc-.js";import"./house-ChbwIVOP.js";import"./shopping-bag-DoBm2djZ.js";import"./message-circle-B3JmwOyU.js";import"./user-Cp2_ijPu.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],$=w("trash-2",P);function X({cartItems:r,onBack:p,onNavigate:c,onUpdateQuantity:x,onRemoveItem:j,onCheckout:u,cartItemCount:o=0}){const[g,N]=k.useState(null),a=Array.isArray(r)?r:[],d=a.length===0;console.log("ðŸ›’ ShoppingCart render:",{cartItems:r,safeLength:a.length,isEmpty:d,cartItemCount:o});const b=s=>{N(s),setTimeout(()=>{j(s),S.success("Item removed from cart")},300)},m=a.reduce((s,t)=>{const v=parseFloat(String(t.price||"0").replace("â‚¿","").replace("From","").trim());return s+v*(t.quantity||1)},0),l=m/8.9,i=l*.1,h=l+i,y=h*8.9;return e.jsxs("div",{className:"h-screen flex flex-col bg-[#0a0a1a]",children:[e.jsx("div",{className:"flex-shrink-0 bg-gradient-to-br from-[#0f172a] to-[#1e3a8a] px-5 pt-14 pb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(n,{variant:"ghost",size:"icon",onClick:p,className:"text-white hover:bg-white/20 rounded-full",children:e.jsx(F,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl text-white",style:{fontFamily:"Inter, sans-serif",fontWeight:700},children:"Shopping Cart"}),a.length>0&&e.jsxs("p",{className:"text-sm text-blue-200 mt-1",children:[a.length," ",a.length===1?"item":"items"]})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-5 -mt-4",children:e.jsx("div",{className:"py-6",children:d?e.jsx(E,{type:"cart",onAction:()=>c("marketplace")}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6 space-y-3",children:e.jsx(B,{children:a.map(s=>e.jsx(M.div,{initial:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},children:e.jsx(f,{className:`p-4 bg-[#1a1a2e] border border-slate-700/40 transition-all ${g===s.id?"opacity-50":""}`,children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-xl bg-gradient-to-br from-blue-600/20 to-blue-800/20 flex items-center justify-center flex-shrink-0 overflow-hidden",children:(()=>{if(s.image&&typeof s.image=="string")return s.image.startsWith("http")||s.image.startsWith("/")?e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover",onError:t=>{t.currentTarget.style.display="none",t.currentTarget.parentElement&&(t.currentTarget.parentElement.innerHTML='<div class="text-3xl">ðŸ“¦</div>')}}):e.jsx("span",{className:"text-3xl",children:s.image});if(s.icon){const t=s.icon;return e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-600 to-blue-800 rounded-xl flex items-center justify-center",children:e.jsx(t,{className:"w-8 h-8 text-white"})})}else return e.jsx("span",{className:"text-3xl",children:"ðŸ“¦"})})()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[e.jsx("h3",{className:"text-sm text-white mb-1 truncate",style:{fontFamily:"Inter, sans-serif",fontWeight:600},children:s.name}),e.jsx("p",{className:"text-xs text-slate-400",children:s.seller})]}),e.jsx(n,{variant:"ghost",size:"icon",onClick:()=>b(s.id),className:"text-red-400 hover:text-red-300 hover:bg-red-500/10 h-8 w-8 flex-shrink-0",children:e.jsx($,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white",style:{fontFamily:"Inter, sans-serif",fontWeight:700},children:s.price}),e.jsx("p",{className:"text-xs text-slate-400",children:s.usdPrice})]}),s.type==="product"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>x(s.id,Math.max(1,s.quantity-1)),className:"w-7 h-7 rounded-lg bg-slate-800/50 hover:bg-slate-700/50 flex items-center justify-center text-white transition-colors",children:e.jsx(T,{className:"w-3 h-3"})}),e.jsx("span",{className:"text-sm text-white w-6 text-center",style:{fontFamily:"Inter, sans-serif",fontWeight:600},children:s.quantity}),e.jsx("button",{onClick:()=>x(s.id,s.quantity+1),className:"w-7 h-7 rounded-lg bg-slate-800/50 hover:bg-slate-700/50 flex items-center justify-center text-white transition-colors",children:e.jsx(W,{className:"w-3 h-3"})})]})]})]})]})})},s.id))})}),e.jsxs(f,{className:"p-5 bg-[#1a1a2e] border border-slate-700/40 mb-4",children:[e.jsx("h3",{className:"text-sm text-white mb-4",style:{fontFamily:"Inter, sans-serif",fontWeight:600},children:"Order Summary"}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-400",children:"Subtotal"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-white",children:["â‚¿ ",m.toFixed(1)]}),e.jsxs("p",{className:"text-xs text-slate-400",children:["$",l.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-400",children:"Estimated Tax"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-white",children:["â‚¿ ",(i*8.9).toFixed(1)]}),e.jsxs("p",{className:"text-xs text-slate-400",children:["$",i.toFixed(2)]})]})]}),e.jsx("div",{className:"border-t border-slate-700/40 pt-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-base text-white",style:{fontFamily:"Inter, sans-serif",fontWeight:600},children:"Total"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg text-white",style:{fontFamily:"Inter, sans-serif",fontWeight:700},children:["â‚¿ ",y.toFixed(1)]}),e.jsxs("p",{className:"text-sm text-slate-400",children:["$",h.toFixed(2)]})]})]})})]}),e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-blue-500/10 border border-blue-500/20 rounded-xl",children:[e.jsx(A,{className:"w-4 h-4 text-blue-400 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-xs text-blue-300 leading-relaxed",children:"Payment will be processed securely using your Bery wallet"})]})]}),e.jsxs(n,{onClick:u,className:"w-full h-14 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white",children:[e.jsx(C,{className:"w-5 h-5 mr-2"}),"Proceed to Checkout"]})]})})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(I,{currentScreen:"marketplace",onNavigate:c,cartItemCount:o})})]})}export{X as ShoppingCart};

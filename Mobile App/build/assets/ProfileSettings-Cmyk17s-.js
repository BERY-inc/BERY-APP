import{c as O,k as A,r as i,u as ee,j as e,b as G,B as p,A as pe,e as k,l as R,I as V,S as ue,g as X,t as S}from"./index-BKXw_VyK.js";import{L as z}from"./label-BXviQguc.js";import{A as fe,b as ge,a as Ne}from"./avatar-BZdplzq1.js";import{u as je,c as ve}from"./index-Ber45SI1.js";import{c as ye}from"./index-D7UJh6tX.js";import{u as be,a as we}from"./index-B7YMNSsg.js";import{P as J}from"./index-YajLREcw.js";import{B as ke}from"./BottomNavigation-BmO9oE0V.js";import{C as W}from"./circle-check-CWk6NO6I.js";import{L as Se}from"./lock-UPzsb-6u.js";import{B as Ce}from"./bell-BmFKkYmd.js";import{m as C}from"./proxy-BXaEAfrz.js";import"./index-oVrvYLc-.js";import"./house-ChbwIVOP.js";import"./shopping-bag-DoBm2djZ.js";import"./message-circle-B3JmwOyU.js";import"./user-Cp2_ijPu.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],_e=O("log-out",Pe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],Ae=O("moon",Ie);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Ee=O("smartphone",Me);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Te=O("square-pen",Le);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],ze=O("sun",Re);class Be{async getCustomerInfo(){try{return(await A.get("/api/v1/customer/info")).data}catch(s){throw s}}async updateProfile(s){try{const a=new FormData;return a.append("f_name",s.f_name),a.append("l_name",s.l_name),a.append("email",s.email),s.image&&a.append("image",s.image),(await A.post("/api/v1/customer/update-profile",a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw a}}async getAddressList(){try{return(await A.get("/api/v1/customer/address/list")).data.addresses}catch(s){throw s}}async addAddress(s){try{return(await A.post("/api/v1/customer/address/add",s)).data}catch(a){throw a}}async updateAddress(s,a){try{return(await A.put(`/api/v1/customer/address/update/${s}`,a)).data}catch(o){throw o}}async deleteAddress(s){try{return(await A.delete("/api/v1/customer/address/delete",{data:{id:s}})).data}catch(a){throw a}}}const Oe=new Be;var F="Switch",[Ue]=ye(F),[De,$e]=Ue(F),te=i.forwardRef((n,s)=>{const{__scopeSwitch:a,name:o,checked:c,defaultChecked:x,required:u,disabled:l,value:f="on",onCheckedChange:j,form:v,...b}=n,[P,_]=i.useState(null),I=ee(s,y=>_(y)),M=i.useRef(!1),E=P?v||!!P.closest("form"):!0,[w,L]=je({prop:c,defaultProp:x??!1,onChange:j,caller:F});return e.jsxs(De,{scope:a,checked:w,disabled:l,children:[e.jsx(J.button,{type:"button",role:"switch","aria-checked":w,"aria-required":u,"data-state":ie(w),"data-disabled":l?"":void 0,disabled:l,value:f,...b,ref:I,onClick:ve(n.onClick,y=>{L(U=>!U),E&&(M.current=y.isPropagationStopped(),M.current||y.stopPropagation())})}),E&&e.jsx(re,{control:P,bubbles:!M.current,name:o,value:f,checked:w,required:u,disabled:l,form:v,style:{transform:"translateX(-100%)"}})]})});te.displayName=F;var se="SwitchThumb",ae=i.forwardRef((n,s)=>{const{__scopeSwitch:a,...o}=n,c=$e(se,a);return e.jsx(J.span,{"data-state":ie(c.checked),"data-disabled":c.disabled?"":void 0,...o,ref:s})});ae.displayName=se;var Fe="SwitchBubbleInput",re=i.forwardRef(({__scopeSwitch:n,control:s,checked:a,bubbles:o=!0,...c},x)=>{const u=i.useRef(null),l=ee(u,x),f=be(a),j=we(s);return i.useEffect(()=>{const v=u.current;if(!v)return;const b=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(b,"checked").set;if(f!==a&&_){const I=new Event("click",{bubbles:o});_.call(v,a),v.dispatchEvent(I)}},[f,a,o]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...c,tabIndex:-1,ref:l,style:{...c.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});re.displayName=Fe;function ie(n){return n?"checked":"unchecked"}var qe=te,He=ae;function B({className:n,...s}){return e.jsx(qe,{"data-slot":"switch",className:G("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",n),...s,children:e.jsx(He,{"data-slot":"switch-thumb",className:G("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var Ve="Separator",Q="horizontal",We=["horizontal","vertical"],ne=i.forwardRef((n,s)=>{const{decorative:a,orientation:o=Q,...c}=n,x=Ge(o)?o:Q,l=a?{role:"none"}:{"aria-orientation":x==="vertical"?x:void 0,role:"separator"};return e.jsx(J.div,{"data-orientation":x,...l,...c,ref:s})});ne.displayName=Ve;function Ge(n){return We.includes(n)}var Je=ne;function $({className:n,orientation:s="horizontal",decorative:a=!0,...o}){return e.jsx(Je,{"data-slot":"separator-root",decorative:a,orientation:s,className:G("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",n),...o})}function ht({onBack:n,onNavigate:s,onLogout:a,cartItemCount:o=0,userData:c,onUserDataChange:x}){const u=i.useRef(null),[l,f]=i.useState(()=>{try{const t=localStorage.getItem("profile_notifications");if(t)return JSON.parse(t)}catch{}return{transactions:!0,marketing:!1,security:!0}}),[j,v]=i.useState(()=>{try{return localStorage.getItem("profile_darkMode")==="true"}catch{return!1}}),[b,P]=i.useState(()=>{try{const t=localStorage.getItem("profile_biometric");return t?t==="true":!0}catch{return!0}}),[_,I]=i.useState(c??null),[M,E]=i.useState(!1),[w,L]=i.useState(!1),[y,U]=i.useState(!1),[Y,Z]=i.useState(null),[g,T]=i.useState({firstName:c?.firstName||"",lastName:c?.lastName||"",email:c?.email||""});i.useEffect(()=>{try{localStorage.setItem("profile_notifications",JSON.stringify(l)),localStorage.setItem("profile_darkMode",String(j)),localStorage.setItem("profile_biometric",String(b))}catch{}},[l,j,b]),i.useEffect(()=>{let t=!1;return(async()=>{if(localStorage.getItem("authToken"))try{E(!0);const h=await X.getProfile();if(t)return;let m=h.image;m&&!m.startsWith("http")&&(m=`https://market.bery.in/storage/app/public/profile/${m}`);const H=h.created_at?new Date(h.created_at):null,xe=H&&!Number.isNaN(H.getTime())?H.toLocaleDateString(void 0,{month:"short",year:"numeric"}):void 0,N={firstName:h.f_name,lastName:h.l_name,email:h.email,phone:h.phone,image:m,memberSince:xe};I(N),x?.({email:N.email,phone:N.phone,firstName:N.firstName,lastName:N.lastName,image:N.image}),T({firstName:N.firstName||"",lastName:N.lastName||"",email:N.email||""})}catch(h){const m=(h?.response?.data?.message||h?.message||"Failed to load profile").toString();S.error(m)}finally{t||E(!1)}})(),()=>{t=!0}},[]);const d=_??c,q=d?.firstName||d?.lastName?`${d?.firstName||""} ${d?.lastName||""}`.trim():d?.email?d.email.split("@")[0]:d?.phone||"Guest User",oe=d?.email||"No email provided",ce=d?.phone||"No phone linked",le=d?.memberSince||"Jan 2024",de=q!=="Guest User"?q.split(" ").map(t=>t[0]).join("").substring(0,2).toUpperCase():"GU",K=d?.image,me=()=>{if(!localStorage.getItem("authToken")){S.info("Login required",{description:"Please login to edit your profile."});return}T({firstName:d?.firstName||"",lastName:d?.lastName||"",email:d?.email||""}),Z(null),L(!0)},he=async()=>{try{if(!localStorage.getItem("authToken")){S.info("Login required",{description:"Please login to update your profile."});return}if(!g.firstName.trim()||!g.lastName.trim()){S.error("Please enter your first and last name");return}if(!g.email.trim()){S.error("Please enter your email");return}U(!0),await Oe.updateProfile({f_name:g.firstName.trim(),l_name:g.lastName.trim(),email:g.email.trim(),image:Y||void 0});const t=await X.getProfile();let r=t.image;r&&!r.startsWith("http")&&(r=`https://market.bery.in/storage/app/public/profile/${r}`);const D=t.created_at?new Date(t.created_at):null,h=D&&!Number.isNaN(D.getTime())?D.toLocaleDateString(void 0,{month:"short",year:"numeric"}):void 0,m={firstName:t.f_name,lastName:t.l_name,email:t.email,phone:t.phone,image:r,memberSince:h};I(m),x?.({email:m.email,phone:m.phone,firstName:m.firstName,lastName:m.lastName,image:m.image}),L(!1),S.success("Profile updated")}catch(t){const r=(t?.response?.data?.message||t?.message||"Profile update failed").toString();S.error(r)}finally{U(!1)}};return e.jsxs("div",{className:"h-screen overflow-y-auto pb-32 bg-[#0a0a1a]",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#0f172a] to-[#1e3a8a] text-white px-5 pt-14 pb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(p,{variant:"ghost",size:"icon",onClick:n,className:"text-white hover:bg-white/20 rounded-full",children:e.jsx(pe,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-xl",style:{fontFamily:"Inter, sans-serif",fontWeight:700},children:"Profile & Settings"})]}),e.jsx("p",{className:"text-blue-200/80 text-sm",children:"Manage your account"})]}),e.jsxs("div",{className:"px-5 -mt-6 py-6",children:[e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(k,{className:"p-5 mb-5",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(fe,{className:"w-20 h-20",children:[K&&e.jsx(ge,{src:K}),e.jsx(Ne,{className:"bg-gradient-to-br from-[#2563eb] to-[#7c3aed] text-white text-2xl",children:de})]}),e.jsx(p,{size:"icon",className:"absolute -bottom-1 -right-1 rounded-full w-8 h-8 bg-white text-[#2563eb] hover:bg-white/90 shadow-lg border-2 border-background",onClick:()=>{w||me()},children:e.jsx(Te,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-base mb-1",children:q}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:oe}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{className:"bg-[#14b8a6] hover:bg-[#14b8a6] text-xs",children:[e.jsx(W,{className:"w-3 h-3 mr-1"}),"Verified"]}),e.jsx(R,{variant:"outline",className:"text-xs",children:"Premium"})]})]})]}),M&&e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Loading profileâ€¦"})}),w&&e.jsxs("div",{className:"mb-5 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(z,{className:"text-xs",children:"First name"}),e.jsx(V,{value:g.firstName,onChange:t=>T(r=>({...r,firstName:t.target.value})),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-xs",children:"Last name"}),e.jsx(V,{value:g.lastName,onChange:t=>T(r=>({...r,lastName:t.target.value})),className:"mt-1"})]})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-xs",children:"Email"}),e.jsx(V,{value:g.email,onChange:t=>T(r=>({...r,email:t.target.value})),className:"mt-1"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("input",{ref:u,type:"file",accept:"image/*",className:"hidden",onChange:t=>Z(t.target.files?.[0]??null)}),e.jsx(p,{type:"button",variant:"outline",className:"h-9 text-xs",onClick:()=>u.current?.click(),children:Y?"Image selected":"Change photo"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{type:"button",variant:"outline",className:"h-9 text-xs",onClick:()=>L(!1),disabled:y,children:"Cancel"}),e.jsx(p,{type:"button",className:"h-9 text-xs",onClick:he,disabled:y,children:y?"Saving...":"Save"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx(z,{className:"text-xs text-muted-foreground",children:"Phone"}),e.jsx("p",{className:"mt-1 text-xs",children:ce})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-xs text-muted-foreground",children:"Member Since"}),e.jsx("p",{className:"mt-1 text-xs",children:le})]})]})]})}),e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:e.jsx(k,{className:"p-4 mb-5 bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0",children:e.jsx(ue,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-sm",children:"KYC Verification"}),e.jsx(R,{className:"bg-green-600 hover:bg-green-600 text-xs",children:"Complete"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Your identity has been verified"}),e.jsxs("div",{className:"flex gap-2 text-xs",children:[e.jsxs(R,{variant:"outline",className:"bg-white text-xs",children:[e.jsx(W,{className:"w-3 h-3 mr-1 text-green-600"}),"ID"]}),e.jsxs(R,{variant:"outline",className:"bg-white text-xs",children:[e.jsx(W,{className:"w-3 h-3 mr-1 text-green-600"}),"Address"]})]})]})]})})}),e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},children:e.jsxs(k,{className:"p-5 mb-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Se,{className:"w-5 h-5 text-[#2563eb]"}),e.jsx("h3",{className:"text-base",children:"Security"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(Ee,{className:"w-5 h-5 text-[#2563eb]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:"Biometric Auth"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Face ID or fingerprint"})]})]}),e.jsx(B,{checked:b,onCheckedChange:P})]}),e.jsx($,{}),e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:"Change PIN"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Update security PIN"})]}),e.jsx(p,{variant:"outline",size:"sm",className:"h-9 text-xs",children:"Change"})]}),e.jsx($,{}),e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:"Password"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Update password"})]}),e.jsx(p,{variant:"outline",size:"sm",className:"h-9 text-xs",children:"Change"})]})]})]})}),e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},children:e.jsxs(k,{className:"p-5 mb-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ce,{className:"w-5 h-5 text-[#2563eb]"}),e.jsx("h3",{className:"text-base",children:"Notifications"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:"Transaction Alerts"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All transactions"})]}),e.jsx(B,{checked:l.transactions,onCheckedChange:t=>f(r=>({...r,transactions:t}))})]}),e.jsx($,{}),e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:"Security Alerts"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Security updates"})]}),e.jsx(B,{checked:l.security,onCheckedChange:t=>f(r=>({...r,security:t}))})]}),e.jsx($,{}),e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:"Marketing"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Offers & promotions"})]}),e.jsx(B,{checked:l.marketing,onCheckedChange:t=>f(r=>({...r,marketing:t}))})]})]})]})}),e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},children:e.jsxs(k,{className:"p-5 mb-5",children:[e.jsx("h3",{className:"mb-4 text-base",children:"Appearance"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:j?e.jsx(Ae,{className:"w-5 h-5"}):e.jsx(ze,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:"Dark Mode"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle dark theme"})]})]}),e.jsx(B,{checked:j,onCheckedChange:v})]})]})}),e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},children:e.jsx(k,{className:"p-5 mb-5",children:e.jsxs(p,{variant:"outline",className:"w-full border-slate-600/40 text-slate-300 hover:bg-slate-800/50 h-11 text-sm justify-center",onClick:a,children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),"Logout"]})})}),e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:e.jsxs(k,{className:"p-5 border-red-200",children:[e.jsx("h3",{className:"text-red-600 mb-3 text-base",children:"Danger Zone"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{variant:"outline",className:"w-full border-red-200 text-red-600 hover:bg-red-50 h-11 text-sm",children:"Deactivate Account"}),e.jsx(p,{variant:"outline",className:"w-full border-red-200 text-red-600 hover:bg-red-50 h-11 text-sm",children:"Delete Account"})]})]})})]}),e.jsx(ke,{currentScreen:"profile",onNavigate:s,cartItemCount:o})]})}export{ht as ProfileSettings};
